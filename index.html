<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ランダムなライト演出シミュレーション</title>
    <style> 
        body { margin: 0; } 
        canvas { display: block; } 
    </style>
</head>
<body>
    <!-- Three.js ライブラリを読み込む -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>

    <script>
        // Three.jsの基本設定
        var scene = new THREE.Scene();
        var camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
        var renderer = new THREE.WebGLRenderer();
        renderer.setSize(window.innerWidth, window.innerHeight);
        document.body.appendChild(renderer.domElement);

        // 照明をセットアップ
        var lights = [];
        for (var i = 0; i < 20; i++) {
            var light = new THREE.SpotLight(0xffffff, 1, 100, Math.PI / 6, 0.5);
            light.position.set(Math.random() * 20 - 10, 5, Math.random() * 10 - 5);
            light.target.position.set(0, 0, 0);
            scene.add(light.target);
            scene.add(light);
            lights.push(light);
        }

        // ステージの床を作成
        var floorGeometry = new THREE.PlaneGeometry(50, 50);
        var floorMaterial = new THREE.MeshBasicMaterial({ color: 0x111111, side: THREE.DoubleSide });
        var floor = new THREE.Mesh(floorGeometry, floorMaterial);
        floor.rotation.x = Math.PI / 2;
        scene.add(floor);

        // カメラの位置を設定
        camera.position.z = 30;
        camera.position.y = 10;

        // アニメーションループ
        function animate() {
            requestAnimationFrame(animate);

            // ライトの強度と色をランダムに変更
            lights.forEach(function(light, index) {
                var intensity = Math.random();
                light.intensity = intensity * 2;
                light.color.setHSL(intensity, 1, 0.5);

                // ライトの位置もランダムに動かす
                light.position.x = Math.sin(Date.now() * 0.001 + index) * 10;
                light.position.z = Math.cos(Date.now() * 0.001 + index) * 5;
            });

            renderer.render(scene, camera);
        }

        animate();
    </script>
</body>
</html>
